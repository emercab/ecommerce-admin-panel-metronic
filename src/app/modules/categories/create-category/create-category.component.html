<div class="card">
  <span class="spinner-border spinner-border-sm align-middle ms-2" *ngIf="isLoading$ | async"></span>

  <div class="card-body border-top p-9">

    <div class="row g-9 mb-8">
      <div class="col-4">
        <label class="btn btn-outline btn-outline-dashed btn-outline-default d-flex text-start p-6"
          [ngClass]="{'active': typeCategory == 1}" data-kt-button="true">
          <span class="form-check form-check-custom form-check-solid form-check-sm align-items-start mt-1">
            <input class="form-check-input" type="radio" (click)="changeTypeCategory(1)" name="usage" value="1"
              checked="checked">
          </span>
          <span class="ms-5">
            <span class="fs-6 fw-bolder mb-1 d-block">Department</span>
            <small>First Level</small>
          </span>
        </label>
      </div>

      <div class="col-4">
        <label class="btn btn-outline btn-outline-dashed btn-outline-default d-flex text-start p-6"
          [ngClass]="{'active': typeCategory == 2}" data-kt-button="true">
          <span class="form-check form-check-custom form-check-solid form-check-sm align-items-start mt-1">
            <input class="form-check-input" type="radio" (click)="changeTypeCategory(2)" name="usage" value="2">
          </span>
          <span class="ms-5">
            <span class="fs-6 fw-bolder mb-1 d-block">Category</span>
            <small>Second Level</small>
          </span>
        </label>
      </div>

      <div class="col-4">
        <label class="btn btn-outline btn-outline-dashed btn-outline-default d-flex text-start p-6"
          [ngClass]="{'active': typeCategory == 3}" data-kt-button="true">
          <span class="form-check form-check-custom form-check-solid form-check-sm align-items-start mt-1">
            <input class="form-check-input" type="radio" (click)="changeTypeCategory(3)" name="usage" value="2">
          </span>
          <span class="ms-5">
            <span class="fs-6 fw-bolder mb-1 d-block">Subcategory</span>
            <small>Third Level</small>
          </span>
        </label>
      </div>

    </div>

    <div class="row mb-6">
      <div class="col-lg-6 fv-row fv-plugins-icon-container">
        <label class="col-form-label required fw-semibold fs-6">Name:</label>
        <input type="text" name="name" [(ngModel)]="name" class="form-control form-control-lg form-control-solid"
          placeholder="Category name">
      </div>

      <div class="col-lg-6 fv-row fv-plugins-icon-container">
        <label class="col-form-label fw-semibold fs-6" [ngClass]="{'required': typeCategory == 1}">Icon:</label>
        <input type="text" name="icon" [(ngModel)]="icon" class="form-control form-control-lg form-control-solid"
          placeholder="Category icon">
      </div>
    </div>

    <div class="row mb-6">
      <div class="col-lg-6 col-md-6 col-sm-12 my-2">
        <label class="form-label" [ngClass]="{'required': typeCategory == 1}">Upload an image:</label>
        <div class="custom-file">
          <input type="file" class="form-control form-control-lg form-control-solid" id="customFile"
            accept=".jpeg, .bmp, .jpg, .png, .gif, .webp" (change)="processFile($event)">
          <label class="custom-file-label" for="customFile">Choose file</label>
        </div>

        <!-- Image Preview -->
        <div class="image-input image-input-outline mt-4">
          <!--begin::Preview existing avatar-->
          <img [src]="imgPreview" alt="Category image" class="image-input-wrapper w-175px h-175px">
          <!--end::Preview existing avatar-->

        </div>
      </div>

      <div class="col-lg-6 fv-row fv-plugins-icon-container">
        <label class="col-form-label required fw-semibold fs-6">Position:</label>
        <input type="number" name="position" [(ngModel)]="position"
          class="form-control form-control-lg form-control-solid" placeholder="5">
      </div>

    </div>

    <div class="row mb-6" *ngIf="typeCategory != 1">
      <div class="col-lg-6 fv-row fv-plugins-icon-container" *ngIf="typeCategory == 2 || typeCategory == 3">
        <label class="col-form-label required fw-semibold fs-6">Department:</label>
        <select class="form-select form-select-lg fw-bolder" name="department" placeholder="Select department"
          [(ngModel)]="department" (change)="onChangeDepartment($event)">
          <option value="">Select...</option>
          <ng-container *ngFor="let option of optionsDepartment">
            <option value="{{option.id}}">{{option.name}}</option>
          </ng-container>
        </select>
      </div>

      <div class="col-lg-6 fv-row fv-plugins-icon-container" *ngIf="typeCategory == 3">
        <label class="col-form-label required fw-semibold fs-6">Category:</label>
        <select class="form-select form-select-lg fw-bolder" name="category" placeholder="Select category"
          [(ngModel)]="category" (change)="onChangeCategory($event)">
          <option value="">Select...</option>
          <ng-container *ngFor="let option of optionsCategory">
            <option value="{{option.id}}">{{option.name}}</option>
          </ng-container>

        </select>
      </div>

    </div>

    <div class="row mb-6">
      <div class="col-3">
        <button type="button" class="btn btn-primary" (click)="saveCategory()">
          Save Category
        </button>
      </div>
    </div>

  </div>